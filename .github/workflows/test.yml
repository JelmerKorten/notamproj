name: Manual-Workflow

on:
  workflow_dispatch:

jobs:

  build:
    name: Create windows binary
    runs-on: windows-latest

    steps:
    - uses: actions/checkout@v3

    # Setup Python
    - uses: actions/setup-python@v4
      with:
        python-version: '3.11'
        cache: 'pip'

    # Setup chrome
    - uses: browser-actions/setup-chrome@v1
    - run: chrome --latest

    # Install requirements
    - name: install requirements
      run: pip install -r requirements.txt

    - name: print ls
      run: ls

    # Create standalone
    - name: create standalone
      run: python setup.py build
    
    # Upload artifact
    - name: upload artifact
      uses: actions/upload-artifact@v3
      with:
        name: standalone
        path: ./notamproject

    # Run the created standalone on windows
    - name: cd to project folder
      run: cd notamproject

    - name: run exe
      run: open notamplotter.exe

    # cd into the output folder
    - name: cd into output
      run: cd output

    # Check if output
    - name: ls output
      run: ls

    # End note
    - name: print
      run: echo "Run completed."
        
# jobs:

#   build:
#     # Windows is currently the only platform this action supports
#     runs-on: windows-latest

#     steps:

#       # Check-out repository
#       - uses: actions/checkout@v3

#       # Setup Python
#       - uses: actions/setup-python@v4
#         with:
#           python-version: '3.11'
#           cache: 'pip'

#       # Setup environment
#       - name: install requirements
#         run: pip install requirements.txt
#
#       # Create standalone
#       - name: create standalone
#         run: python setup.py build
#
#       # find standalone and upload
#       - name: Upload Artifact
#         uses: actions/upload-artifact@v3
#         with:
#           name: standalone
#           path: ./notamproject
#       # Build python script into a stand-alone exe
#       - uses: Nuitka/Nuitka-Action@main
#         with:
#           nuitka-version: main
#           script-name: hello_world.py
#           onefile: true

#       # Uploads artifact
#       - name: Upload Artifact
#         uses: actions/upload-artifact@v3
#         with:
#           name: exe
#           path: build/hello_world.exe